<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Smart AgriGreen</title>
    <link rel="stylesheet" href="static/forgot_password.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js" type="module"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js';
        import { getAuth, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDuoOmODQyXouGNZ5HXvb5O3tdrb_lQVYA",
            authDomain: "smart-agrigreen.firebaseapp.com",
            projectId: "smart-agrigreen",
            storageBucket: "smart-agrigreen.appspot.com",
            messagingSenderId: "375327867764",
            appId: "1:375327867764:web:2fd6220586e0eade80a221"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        window.onload = function() {
            document.getElementById('reset-form').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent the default form submission
                const email = document.getElementById('email').value;

                sendPasswordResetEmail(auth, email)
                    .then(() => {
                        alert('Password reset link sent! Check your email.');
                        window.location.href = '/'; // Redirect to login page after email sent
                    })
                    .catch((error) => {
                        console.error('Error sending password reset email:', error);
                        alert('Error: ' + error.message);
                    });
            });
        };
    </script>
</head>
<body>
    <div class="container">
        <div class="box">
            <!-- Image overlay section -->
            <div class="image-overlay">
            </div>

            <!-- Form Section -->
            <div class="form-side">
                <form class="form" id="reset-form">
                    <h2>Password Reset</h2>
                    <p>Provide the email connected to your account to recover your password.</p>
                    <input type="email" id="email" placeholder="Enter Email" required>
                    <a href="/">Go back</a>
                    <button type="submit">Send Reset Link</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
